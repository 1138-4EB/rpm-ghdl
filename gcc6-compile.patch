--- gcc/ubsan.c.x	2017-03-03 18:25:26.758115557 +0100
+++ gcc/ubsan.c	2017-03-03 18:25:57.592511802 +0100
@@ -1471,7 +1471,7 @@
 
   expanded_location xloc = expand_location (loc);
   if (xloc.file == NULL || strncmp (xloc.file, "\1", 2) == 0
-      || xloc.file == '\0' || xloc.file[0] == '\xff'
+      || xloc.file[0] == '\0' || xloc.file[0] == '\xff'
       || xloc.file[1] == '\xff')
     return false;
 
